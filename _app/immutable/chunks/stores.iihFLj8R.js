import{i as h}from"./index.CMkSj3Qc.js";import{v as ee}from"./scheduler.D8qTjLsa.js";import{U as F,N as re,P as te,a as ne,b as W,H as se,p as oe,u as ae,w as ue}from"./parse.CcjKRQ7_.js";const ce={"<":"\\u003C","\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\u2028":"\\u2028","\u2029":"\\u2029"};class T extends Error{constructor(t,s){super(t),this.name="DevalueError",this.path=s.join("")}}function j(e){return Object(e)!==e}const ie=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function J(e){const t=Object.getPrototypeOf(e);return t===Object.prototype||t===null||Object.getOwnPropertyNames(t).sort().join("\0")===ie}function D(e){return Object.prototype.toString.call(e).slice(8,-1)}function le(e){switch(e){case'"':return'\\"';case"<":return"\\u003C";case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e<" "?`\\u${e.charCodeAt(0).toString(16).padStart(4,"0")}`:""}}function v(e){let t="",s=0;const a=e.length;for(let d=0;d<a;d+=1){const l=e[d],O=le(l);O&&(t+=e.slice(s,d)+O,s=d+1)}return`"${s===0?e:t+e.slice(s)}"`}function H(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.getOwnPropertyDescriptor(e,t).enumerable)}const x="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_$",fe=/[<\b\f\n\r\t\0\u2028\u2029]/g,pe=/^(?:do|if|in|for|int|let|new|try|var|byte|case|char|else|enum|goto|long|this|void|with|await|break|catch|class|const|final|float|short|super|throw|while|yield|delete|double|export|import|native|return|switch|throws|typeof|boolean|default|extends|finally|package|private|abstract|continue|debugger|function|volatile|interface|protected|transient|implements|instanceof|synchronized)$/;function de(e,t){const s=new Map,a=[],d=new Map;function l(r){if(typeof r=="function")throw new T("Cannot stringify a function",a);if(!j(r)){if(s.has(r)){s.set(r,s.get(r)+1);return}if(s.set(r,1),t){const n=t(r);if(typeof n=="string"){d.set(r,n);return}}switch(D(r)){case"Number":case"BigInt":case"String":case"Boolean":case"Date":case"RegExp":return;case"Array":r.forEach((n,f)=>{a.push(`[${f}]`),l(n),a.pop()});break;case"Set":Array.from(r).forEach(l);break;case"Map":for(const[n,f]of r)a.push(`.get(${j(n)?C(n):"..."})`),l(f),a.pop();break;default:if(!J(r))throw new T("Cannot stringify arbitrary non-POJOs",a);if(H(r).length>0)throw new T("Cannot stringify POJOs with symbolic keys",a);for(const n in r)a.push(`.${n}`),l(r[n]),a.pop()}}}l(e);const O=new Map;Array.from(s).filter(r=>r[1]>1).sort((r,c)=>c[1]-r[1]).forEach((r,c)=>{O.set(r[0],ye(c))});function u(r){if(O.has(r))return O.get(r);if(j(r))return C(r);if(d.has(r))return d.get(r);const c=D(r);switch(c){case"Number":case"String":case"Boolean":return`Object(${u(r.valueOf())})`;case"RegExp":return`new RegExp(${v(r.source)}, "${r.flags}")`;case"Date":return`new Date(${r.getTime()})`;case"Array":const n=r.map((p,o)=>o in r?u(p):""),f=r.length===0||r.length-1 in r?"":",";return`[${n.join(",")}${f}]`;case"Set":case"Map":return`new ${c}([${Array.from(r).map(u).join(",")}])`;default:const i=`{${Object.keys(r).map(p=>`${Oe(p)}:${u(r[p])}`).join(",")}}`;return Object.getPrototypeOf(r)===null?Object.keys(r).length>0?`Object.assign(Object.create(null),${i})`:"Object.create(null)":i}}const m=u(e);if(O.size){const r=[],c=[],n=[];return O.forEach((f,i)=>{if(r.push(f),d.has(i)){n.push(d.get(i));return}if(j(i)){n.push(C(i));return}switch(D(i)){case"Number":case"String":case"Boolean":n.push(`Object(${u(i.valueOf())})`);break;case"RegExp":n.push(i.toString());break;case"Date":n.push(`new Date(${i.getTime()})`);break;case"Array":n.push(`Array(${i.length})`),i.forEach((p,o)=>{c.push(`${f}[${o}]=${u(p)}`)});break;case"Set":n.push("new Set"),c.push(`${f}.${Array.from(i).map(p=>`add(${u(p)})`).join(".")}`);break;case"Map":n.push("new Map"),c.push(`${f}.${Array.from(i).map(([p,o])=>`set(${u(p)}, ${u(o)})`).join(".")}`);break;default:n.push(Object.getPrototypeOf(i)===null?"Object.create(null)":"{}"),Object.keys(i).forEach(p=>{c.push(`${f}${_e(p)}=${u(i[p])}`)})}}),c.push(`return ${m}`),`(function(${r.join(",")}){${c.join(";")}}(${n.join(",")}))`}else return m}function ye(e){let t="";do t=x[e%x.length]+t,e=~~(e/x.length)-1;while(e>=0);return pe.test(t)?`${t}0`:t}function be(e){return ce[e]||e}function G(e){return e.replace(fe,be)}function Oe(e){return/^[_$a-zA-Z][_$a-zA-Z0-9]*$/.test(e)?e:G(JSON.stringify(e))}function _e(e){return/^[_$a-zA-Z][_$a-zA-Z0-9]*$/.test(e)?`.${e}`:`[${G(JSON.stringify(e))}]`}function C(e){if(typeof e=="string")return v(e);if(e===void 0)return"void 0";if(e===0&&1/e<0)return"-0";const t=String(e);return typeof e=="number"?t.replace(/^(-)?0\./,"$1."):typeof e=="bigint"?e+"n":t}function $e(e,t){const s=[],a=new Map,d=[];for(const r in t)d.push({key:r,fn:t[r]});const l=[];let O=0;function u(r){if(typeof r=="function")throw new T("Cannot stringify a function",l);if(a.has(r))return a.get(r);if(r===void 0)return F;if(Number.isNaN(r))return re;if(r===1/0)return te;if(r===-1/0)return ne;if(r===0&&1/r<0)return W;const c=O++;a.set(r,c);for(const{key:f,fn:i}of d){const _=i(r);if(_)return s[c]=`["${f}",${u(_)}]`,c}let n="";if(j(r))n=z(r);else switch(D(r)){case"Number":case"String":case"Boolean":n=`["Object",${z(r)}]`;break;case"BigInt":n=`["BigInt",${r}]`;break;case"Date":n=`["Date","${!isNaN(r.getDate())?r.toISOString():""}"]`;break;case"RegExp":const{source:_,flags:p}=r;n=p?`["RegExp",${v(_)},"${p}"]`:`["RegExp",${v(_)}]`;break;case"Array":n="[";for(let o=0;o<r.length;o+=1)o>0&&(n+=","),o in r?(l.push(`[${o}]`),n+=u(r[o]),l.pop()):n+=se;n+="]";break;case"Set":n='["Set"';for(const o of r)n+=`,${u(o)}`;n+="]";break;case"Map":n='["Map"';for(const[o,N]of r)l.push(`.get(${j(o)?z(o):"..."})`),n+=`,${u(o)},${u(N)}`,l.pop();n+="]";break;default:if(!J(r))throw new T("Cannot stringify arbitrary non-POJOs",l);if(H(r).length>0)throw new T("Cannot stringify POJOs with symbolic keys",l);if(Object.getPrototypeOf(r)===null){n='["null"';for(const o in r)l.push(`.${o}`),n+=`,${v(o)},${u(r[o])}`,l.pop();n+="]"}else{n="{";let o=!1;for(const N in r)o&&(n+=","),o=!0,l.push(`.${N}`),n+=`${v(N)}:${u(r[N])}`,l.pop();n+="}"}}return s[c]=n,c}const m=u(e);return m<0?`${m}`:`[${s.join(",")}]`}function z(e){const t=typeof e;return t==="string"?v(e):e instanceof String?v(e.toString()):e===void 0?F.toString():e===0&&1/e<0?W.toString():t==="bigint"?`["BigInt","${e}"]`:String(e)}const I=Object.freeze(Object.defineProperty({__proto__:null,parse:oe,stringify:$e,uneval:de,unflatten:ae},Symbol.toStringTag,{value:"Module"}));var y=[];for(var U=0;U<256;++U)y.push((U+256).toString(16).slice(1));function we(e,t=0){return(y[e[t+0]]+y[e[t+1]]+y[e[t+2]]+y[e[t+3]]+"-"+y[e[t+4]]+y[e[t+5]]+"-"+y[e[t+6]]+y[e[t+7]]+"-"+y[e[t+8]]+y[e[t+9]]+"-"+y[e[t+10]]+y[e[t+11]]+y[e[t+12]]+y[e[t+13]]+y[e[t+14]]+y[e[t+15]]).toLowerCase()}var R,me=new Uint8Array(16);function ve(){if(!R&&(R=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!R))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return R(me)}var Ne=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const B={randomUUID:Ne};function Ee(e,t,s){if(B.randomUUID&&!t&&!e)return B.randomUUID();e=e||{};var a=e.random||(e.rng||ve)();return a[6]=a[6]&15|64,a[8]=a[8]&63|128,we(a)}function ge(e){return{uuid:Ee(),...e}}function Re(e){return h(e.name)}function De(e){return new Date().getFullYear()-e.birthday.getFullYear()}var Se=(e=>(e.NO_WORK_TOGETHER="NO_WORK_TOGETHER",e.NO_PERSON_AT_LOCATION="NO_PERSON_AT_LOCATION",e.NO_TASK_AT_LOCATION="NO_TASK_AT_LOCATION",e.PERSON_CANNOT_DO_TASK="PERSON_CANNOT_DO_TASK",e))(Se||{});function Z(e,t){switch(e.type){case"NO_WORK_TOGETHER":return e.people.map(s=>s.uuid).includes(t.uuid);case"NO_PERSON_AT_LOCATION":return e.person.uuid===t.uuid||e.location.uuid===t.uuid;case"NO_TASK_AT_LOCATION":return e.task.uuid===t.uuid||e.location.uuid===t.uuid;case"PERSON_CANNOT_DO_TASK":return e.person.uuid===t.uuid||e.task.uuid===t.uuid}}var V={local:{},session:{}};function Ae(e){return e==="local"?localStorage:sessionStorage}function k(e,t,s){var a,d,l,O,u,m,r,c;s!=null&&s.onError&&console.warn("onError has been deprecated. Please use onWriteError instead");const n=(a=s==null?void 0:s.serializer)!=null?a:JSON,f=(d=s==null?void 0:s.storage)!=null?d:"local",i=(l=s==null?void 0:s.syncTabs)!=null?l:!0,_=(u=(O=s==null?void 0:s.onWriteError)!=null?O:s==null?void 0:s.onError)!=null?u:b=>console.error(`Error when writing value from persisted store "${e}" to ${f}`,b),p=(m=s==null?void 0:s.onParseError)!=null?m:(b,$)=>console.error(`Error when parsing ${b?'"'+b+'"':"value"} from persisted store "${e}"`,$),o=(r=s==null?void 0:s.beforeRead)!=null?r:b=>b,N=(c=s==null?void 0:s.beforeWrite)!=null?c:b=>b,L=typeof window<"u"&&typeof document<"u",P=L?Ae(f):null;function M(b,$){const S=N($);try{P==null||P.setItem(b,n.stringify(S))}catch(g){_(g)}}function q(){function b(w){try{return n.parse(w)}catch(A){p(w,A)}}const $=P==null?void 0:P.getItem(e);if($==null)return t;const S=b($);return S==null?t:o(S)}if(!V[f][e]){const b=q(),$=ue(b,w=>{if(L&&f=="local"&&i){const A=E=>{if(E.key===e&&E.newValue){let K;try{K=n.parse(E.newValue)}catch(X){p(E.newValue,X);return}const Q=o(K);w(Q)}};return window.addEventListener("storage",A),()=>window.removeEventListener("storage",A)}}),{subscribe:S,set:g}=$;V[f][e]={set(w){g(w),M(e,w)},update(w){return $.update(A=>{const E=w(A);return M(e,E),E})},reset(){this.set(t)},subscribe:S}}return V[f][e]}const xe=k("skills",[],{serializer:I}),je=k("employees",[],{serializer:I}),Ce=k("locations",[],{serializer:I}),Te=k("tasks",[],{serializer:I}),Y=k("constraints",[],{serializer:I}),ze=k("shifts",[],{serializer:I});function Ue(e){return ee(Y).filter(t=>Z(t,e))}function Ve(e){Te.update(t=>t.map(s=>(s.people=s.people.filter(a=>a.uuid!==e.uuid),s))),Y.update(t=>t.filter(s=>!Z(s,e))),je.update(t=>t.filter(s=>s.uuid!==e.uuid))}export{Se as C,ze as a,ge as b,Y as c,Ue as d,je as e,Ve as f,Re as g,De as h,Ce as l,xe as s,Te as t,Ee as v};
