import{s as ee,w as R,x as U,k as te,A as fe,a as P,g as B,i as k,f as b,t as q,d as z,C as F,j as ue,B as M,e as G,c as H,b as J,r as E,h as ie}from"./scheduler.Ciux9Hyk.js";import{S as ne,i as re,e as K,c as d,a as $,m as h,t as m,b as g,d as v,g as I,f as A}from"./index.DZw56Mkm.js";import{e as S}from"./icon.Bf25M66b.js";import{a as T,c as oe}from"./person-tooltip.Dg2YZUFG.js";import{C as ce,a as _e,b as me,c as pe,d as le}from"./skills-list.CTYRtdfx.js";import{B as ge,c as V,p as de}from"./index.Bkj-IHxV.js";import{R as $e,T as he,P as ve,a as L}from"./skill-badge.BBQkCmoE.js";import{e as se,b as O}from"./person.CD7GjKuV.js";function Q(s,t,o){const r=s.slice();return r[15]=t[o],r}function be(s){let t,o;return t=new L({props:{person:O(s[0]),variant:s[1],placeholder:s[2]}}),{c(){d(t.$$.fragment)},l(r){$(t.$$.fragment,r)},m(r,f){h(t,r,f),o=!0},p(r,f){const e={};f&1&&(e.person=O(r[0])),f&2&&(e.variant=r[1]),f&4&&(e.placeholder=r[2]),t.$set(e)},i(r){o||(m(t.$$.fragment,r),o=!0)},o(r){g(t.$$.fragment,r),o=!1},d(r){v(t,r)}}}function we(s){let t,o;return t=new ge({props:{builders:[s[18]],variant:"ghost",role:"combobox","aria-expanded":s[5],class:"w-10 h-10 rounded-full overflow-visible",$$slots:{default:[be]},$$scope:{ctx:s}}}),{c(){d(t.$$.fragment)},l(r){$(t.$$.fragment,r)},m(r,f){h(t,r,f),o=!0},p(r,f){const e={};f&262144&&(e.builders=[r[18]]),f&32&&(e["aria-expanded"]=r[5]),f&524295&&(e.$$scope={dirty:f,ctx:r}),t.$set(e)},i(r){o||(m(t.$$.fragment,r),o=!0)},o(r){g(t.$$.fragment,r),o=!1},d(r){v(t,r)}}}function ke(s){let t;return{c(){t=q("No people found")},l(o){t=z(o,"No people found")},m(o,r){k(o,t,r)},d(o){o&&b(t)}}}function Ce(s){let t,o,r=s[15].name+"",f,e,u,l;return t=new L({props:{person:s[15]}}),u=new oe({props:{class:V("ml-auto h-6 w-6",s[0]!==s[15].uuid&&"text-transparent")}}),{c(){d(t.$$.fragment),o=P(),f=q(r),e=P(),d(u.$$.fragment)},l(n){$(t.$$.fragment,n),o=B(n),f=z(n,r),e=B(n),$(u.$$.fragment,n)},m(n,a){h(t,n,a),k(n,o,a),k(n,f,a),k(n,e,a),h(u,n,a),l=!0},p(n,a){const i={};a&64&&(i.person=n[15]),t.$set(i),(!l||a&64)&&r!==(r=n[15].name+"")&&ue(f,r);const c={};a&65&&(c.class=V("ml-auto h-6 w-6",n[0]!==n[15].uuid&&"text-transparent")),u.$set(c)},i(n){l||(m(t.$$.fragment,n),m(u.$$.fragment,n),l=!0)},o(n){g(t.$$.fragment,n),g(u.$$.fragment,n),l=!1},d(n){n&&(b(o),b(f),b(e)),v(t,n),v(u,n)}}}function W(s){let t,o;function r(){return s[10](s[15],s[14])}return t=new le({props:{value:s[15].name+";"+s[15].job_title+";"+s[15].uuid,onSelect:r,class:"flex flex-row items-center justify-start gap-2",$$slots:{default:[Ce]},$$scope:{ctx:s}}}),{c(){d(t.$$.fragment)},l(f){$(t.$$.fragment,f)},m(f,e){h(t,f,e),o=!0},p(f,e){s=f;const u={};e&64&&(u.value=s[15].name+";"+s[15].job_title+";"+s[15].uuid),e&16465&&(u.onSelect=r),e&524353&&(u.$$scope={dirty:e,ctx:s}),t.$set(u)},i(f){o||(m(t.$$.fragment,f),o=!0)},o(f){g(t.$$.fragment,f),o=!1},d(f){v(t,f)}}}function je(s){let t,o,r,f;return t=new L({props:{person:void 0,popoverEnabled:!1}}),r=new oe({props:{class:V("ml-auto h-6 w-6",s[0]!==void 0&&"text-transparent")}}),{c(){d(t.$$.fragment),o=q(`
          Unassigned
          `),d(r.$$.fragment)},l(e){$(t.$$.fragment,e),o=z(e,`
          Unassigned
          `),$(r.$$.fragment,e)},m(e,u){h(t,e,u),k(e,o,u),h(r,e,u),f=!0},p(e,u){const l={};u&1&&(l.class=V("ml-auto h-6 w-6",e[0]!==void 0&&"text-transparent")),r.$set(l)},i(e){f||(m(t.$$.fragment,e),m(r.$$.fragment,e),f=!0)},o(e){g(t.$$.fragment,e),g(r.$$.fragment,e),f=!1},d(e){e&&b(o),v(t,e),v(r,e)}}}function Pe(s){let t,o,r,f=S(s[6]),e=[];for(let n=0;n<f.length;n+=1)e[n]=W(Q(s,f,n));const u=n=>g(e[n],1,1,()=>{e[n]=null});function l(){return s[11](s[14])}return o=new le({props:{value:"unassigned",onSelect:l,class:"flex flex-row items-center justify-start gap-2",$$slots:{default:[je]},$$scope:{ctx:s}}}),{c(){for(let n=0;n<e.length;n+=1)e[n].c();t=P(),d(o.$$.fragment)},l(n){for(let a=0;a<e.length;a+=1)e[a].l(n);t=B(n),$(o.$$.fragment,n)},m(n,a){for(let i=0;i<e.length;i+=1)e[i]&&e[i].m(n,a);k(n,t,a),h(o,n,a),r=!0},p(n,a){if(s=n,a&16593){f=S(s[6]);let c;for(c=0;c<f.length;c+=1){const j=Q(s,f,c);e[c]?(e[c].p(j,a),m(e[c],1)):(e[c]=W(j),e[c].c(),m(e[c],1),e[c].m(t.parentNode,t))}for(I(),c=f.length;c<e.length;c+=1)u(c);A()}const i={};a&16401&&(i.onSelect=l),a&524289&&(i.$$scope={dirty:a,ctx:s}),o.$set(i)},i(n){if(!r){for(let a=0;a<f.length;a+=1)m(e[a]);m(o.$$.fragment,n),r=!0}},o(n){e=e.filter(Boolean);for(let a=0;a<e.length;a+=1)g(e[a]);g(o.$$.fragment,n),r=!1},d(n){n&&b(t),F(e,n),v(o,n)}}}function Be(s){let t,o,r,f,e,u;return t=new _e({props:{placeholder:"Search"}}),r=new me({props:{$$slots:{default:[ke]},$$scope:{ctx:s}}}),e=new pe({props:{class:"max-h-[250px] overflow-y-scroll",$$slots:{default:[Pe]},$$scope:{ctx:s}}}),{c(){d(t.$$.fragment),o=P(),d(r.$$.fragment),f=P(),d(e.$$.fragment)},l(l){$(t.$$.fragment,l),o=B(l),$(r.$$.fragment,l),f=B(l),$(e.$$.fragment,l)},m(l,n){h(t,l,n),k(l,o,n),h(r,l,n),k(l,f,n),h(e,l,n),u=!0},p(l,n){const a={};n&524288&&(a.$$scope={dirty:n,ctx:l}),r.$set(a);const i={};n&540753&&(i.$$scope={dirty:n,ctx:l}),e.$set(i)},i(l){u||(m(t.$$.fragment,l),m(r.$$.fragment,l),m(e.$$.fragment,l),u=!0)},o(l){g(t.$$.fragment,l),g(r.$$.fragment,l),g(e.$$.fragment,l),u=!1},d(l){l&&(b(o),b(f)),v(t,l),v(r,l),v(e,l)}}}function Se(s){let t,o;return t=new ce({props:{$$slots:{default:[Be]},$$scope:{ctx:s}}}),{c(){d(t.$$.fragment)},l(r){$(t.$$.fragment,r)},m(r,f){h(t,r,f),o=!0},p(r,f){const e={};f&540753&&(e.$$scope={dirty:f,ctx:r}),t.$set(e)},i(r){o||(m(t.$$.fragment,r),o=!0)},o(r){g(t.$$.fragment,r),o=!1},d(r){v(t,r)}}}function Ne(s){let t,o,r,f;return t=new he({props:{asChild:!0,class:s[3],$$slots:{default:[we,({builder:e})=>({18:e}),({builder:e})=>e?262144:0]},$$scope:{ctx:s}}}),r=new ve({props:{class:"w-[250px] p-0",$$slots:{default:[Se]},$$scope:{ctx:s}}}),{c(){d(t.$$.fragment),o=P(),d(r.$$.fragment)},l(e){$(t.$$.fragment,e),o=B(e),$(r.$$.fragment,e)},m(e,u){h(t,e,u),k(e,o,u),h(r,e,u),f=!0},p(e,u){const l={};u&8&&(l.class=e[3]),u&786471&&(l.$$scope={dirty:u,ctx:e}),t.$set(l);const n={};u&540753&&(n.$$scope={dirty:u,ctx:e}),r.$set(n)},i(e){f||(m(t.$$.fragment,e),m(r.$$.fragment,e),f=!0)},o(e){g(t.$$.fragment,e),g(r.$$.fragment,e),f=!1},d(e){e&&b(o),v(t,e),v(r,e)}}}function Ee(s){let t,o,r;function f(u){s[12](u)}let e={$$slots:{default:[Ne,({ids:u})=>({14:u}),({ids:u})=>u?16384:0]},$$scope:{ctx:s}};return s[5]!==void 0&&(e.open=s[5]),t=new $e({props:e}),R.push(()=>K(t,"open",f)),{c(){d(t.$$.fragment)},l(u){$(t.$$.fragment,u)},m(u,l){h(t,u,l),r=!0},p(u,[l]){const n={};l&540799&&(n.$$scope={dirty:l,ctx:u}),!o&&l&32&&(o=!0,n.open=u[5],U(()=>o=!1)),t.$set(n)},i(u){r||(m(t.$$.fragment,u),r=!0)},o(u){g(t.$$.fragment,u),r=!1},d(u){v(t,u)}}}function Ve(s,t,o){let r,f;te(s,se,_=>o(13,f=_));let e=!1,{person_uuid:u=void 0}=t,{options:l=f}=t,{variant:n=T.default}=t,{placeholder:a="Assign person"}=t,{class:i=""}=t,{filter:c=()=>!0}=t,{onChange:j=(_,C)=>C}=t;function N(_){o(5,e=!1),fe().then(()=>{var C;(C=document.getElementById(_))==null||C.focus()})}const D=(_,C)=>{o(0,u=j(u,_.uuid)),N(C.trigger)},p=_=>{o(0,u=j(u,void 0)),N(_.trigger)};function w(_){e=_,o(5,e)}return s.$$set=_=>{"person_uuid"in _&&o(0,u=_.person_uuid),"options"in _&&o(8,l=_.options),"variant"in _&&o(1,n=_.variant),"placeholder"in _&&o(2,a=_.placeholder),"class"in _&&o(3,i=_.class),"filter"in _&&o(9,c=_.filter),"onChange"in _&&o(4,j=_.onChange)},s.$$.update=()=>{s.$$.dirty&768&&o(6,r=l.filter(c))},[u,n,a,i,j,e,r,N,l,c,D,p,w]}class ae extends ne{constructor(t){super(),re(this,t,Ve,Ee,ee,{person_uuid:0,options:8,variant:1,placeholder:2,class:3,filter:9,onChange:4})}}function X(s,t,o){const r=s.slice();return r[12]=t[o],r[15]=t,r[14]=o,r}function Y(s,t,o){const r=s.slice();return r[12]=t[o],r[13]=t,r[14]=o,r}function Ie(s){let t,o,r,f=S(s[0]),e=[];for(let l=0;l<f.length;l+=1)e[l]=Z(X(s,f,l));const u=l=>g(e[l],1,1,()=>{e[l]=null});return{c(){t=G("div");for(let l=0;l<e.length;l+=1)e[l].c();this.h()},l(l){t=H(l,"DIV",{class:!0});var n=J(t);for(let a=0;a<e.length;a+=1)e[a].l(n);n.forEach(b),this.h()},h(){E(t,"class",o="flex flex-row items-center justify-start gap-2 flex-wrap "+s[2])},m(l,n){k(l,t,n);for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(t,null);r=!0},p(l,n){if(n&25){f=S(l[0]);let a;for(a=0;a<f.length;a+=1){const i=X(l,f,a);e[a]?(e[a].p(i,n),m(e[a],1)):(e[a]=Z(i),e[a].c(),m(e[a],1),e[a].m(t,null))}for(I(),a=f.length;a<e.length;a+=1)u(a);A()}(!r||n&4&&o!==(o="flex flex-row items-center justify-start gap-2 flex-wrap "+l[2]))&&E(t,"class",o)},i(l){if(!r){for(let n=0;n<f.length;n+=1)m(e[n]);r=!0}},o(l){e=e.filter(Boolean);for(let n=0;n<e.length;n+=1)g(e[n]);r=!1},d(l){l&&b(t),F(e,l)}}}function Ae(s){let t,o,r,f=S(s[0]),e=[];for(let l=0;l<f.length;l+=1)e[l]=y(Y(s,f,l));const u=l=>g(e[l],1,1,()=>{e[l]=null});return{c(){t=G("div");for(let l=0;l<e.length;l+=1)e[l].c();this.h()},l(l){t=H(l,"DIV",{class:!0});var n=J(t);for(let a=0;a<e.length;a+=1)e[a].l(n);n.forEach(b),this.h()},h(){E(t,"class",o="group flex flex-row items-center justify-start flex-wrap "+s[2])},m(l,n){k(l,t,n);for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(t,null);r=!0},p(l,n){if(n&25){f=S(l[0]);let a;for(a=0;a<f.length;a+=1){const i=Y(l,f,a);e[a]?(e[a].p(i,n),m(e[a],1)):(e[a]=y(i),e[a].c(),m(e[a],1),e[a].m(t,null))}for(I(),a=f.length;a<e.length;a+=1)u(a);A()}(!r||n&4&&o!==(o="group flex flex-row items-center justify-start flex-wrap "+l[2]))&&E(t,"class",o)},i(l){if(!r){for(let n=0;n<f.length;n+=1)m(e[n]);r=!0}},o(l){e=e.filter(Boolean);for(let n=0;n<e.length;n+=1)g(e[n]);r=!1},d(l){l&&b(t),F(e,l)}}}function Z(s){let t,o,r;function f(...l){return s[9](s[12],...l)}function e(l){s[10](l,s[12],s[15],s[14])}let u={options:s[3],variant:s[4](s[12],s[14]),filter:f};return s[12]!==void 0&&(u.person_uuid=s[12]),t=new ae({props:u}),R.push(()=>K(t,"person_uuid",e)),{c(){d(t.$$.fragment)},l(l){$(t.$$.fragment,l)},m(l,n){h(t,l,n),r=!0},p(l,n){s=l;const a={};n&1&&(a.variant=s[4](s[12],s[14])),n&1&&(a.filter=f),!o&&n&1&&(o=!0,a.person_uuid=s[12],U(()=>o=!1)),t.$set(a)},i(l){r||(m(t.$$.fragment,l),r=!0)},o(l){g(t.$$.fragment,l),r=!1},d(l){v(t,l)}}}function y(s){let t,o,r,f,e;function u(...a){return s[7](s[12],...a)}function l(a){s[8](a,s[12],s[13],s[14])}let n={options:s[3],variant:s[4](s[12],s[14]),filter:u,class:"absolute top-0 left-0 w-10 h-10"};return s[12]!==void 0&&(n.person_uuid=s[12]),o=new ae({props:n}),R.push(()=>K(o,"person_uuid",l)),{c(){t=G("div"),d(o.$$.fragment),f=P(),this.h()},l(a){t=H(a,"DIV",{class:!0});var i=J(t);$(o.$$.fragment,i),f=B(i),i.forEach(b),this.h()},h(){E(t,"class","relative transition-all w-4 h-10 hover:z-20 hover:w-5 group-hover:opacity-55 hover:!opacity-100")},m(a,i){k(a,t,i),h(o,t,null),ie(t,f),e=!0},p(a,i){s=a;const c={};i&1&&(c.variant=s[4](s[12],s[14])),i&1&&(c.filter=u),!r&&i&1&&(r=!0,c.person_uuid=s[12],U(()=>r=!1)),o.$set(c)},i(a){e||(m(o.$$.fragment,a),e=!0)},o(a){g(o.$$.fragment,a),e=!1},d(a){a&&b(t),v(o)}}}function De(s){let t,o,r,f;const e=[Ae,Ie],u=[];function l(n,a){return n[1]?0:1}return t=l(s),o=u[t]=e[t](s),{c(){o.c(),r=M()},l(n){o.l(n),r=M()},m(n,a){u[t].m(n,a),k(n,r,a),f=!0},p(n,[a]){let i=t;t=l(n),t===i?u[t].p(n,a):(I(),g(u[i],1,1,()=>{u[i]=null}),A(),o=u[t],o?o.p(n,a):(o=u[t]=e[t](n),o.c()),m(o,1),o.m(r.parentNode,r))},i(n){f||(m(o),f=!0)},o(n){g(o),f=!1},d(n){n&&b(r),u[t].d(n)}}}function x(s,t){return t===void 0?!1:s.includes(t.uuid)}function Te(s,t,o){let r;te(s,se,p=>o(11,r=p));let f=r,{people_uuids:e=[]}=t,{compact:u=!1}=t,{min_people:l}=t,{max_people:n}=t,{class:a=""}=t;function i(p,w){return w<l&&p===void 0?T.destructive:T.default}const c=(p,w)=>!x(e,w)||w===void 0||w.uuid===p;function j(p,w,_,C){_[C]=p,o(0,e),o(6,n)}const N=(p,w)=>!x(e,w)||w===void 0||w.uuid===p;function D(p,w,_,C){_[C]=p,o(0,e),o(6,n)}return s.$$set=p=>{"people_uuids"in p&&o(0,e=p.people_uuids),"compact"in p&&o(1,u=p.compact),"min_people"in p&&o(5,l=p.min_people),"max_people"in p&&o(6,n=p.max_people),"class"in p&&o(2,a=p.class)},s.$$.update=()=>{s.$$.dirty&65&&(o(0,e=de(e,n,void 0)),o(0,e=e.sort((p,w)=>p===void 0?1:w===void 0?-1:0)))},[e,u,a,f,i,l,n,c,j,N,D]}class Ke extends ne{constructor(t){super(),re(this,t,Te,De,ee,{people_uuids:0,compact:1,min_people:5,max_people:6,class:2})}}export{Ke as P};
