import{s as L,w as I,x as F,a as q,e as O,g as A,c as Q,b as X,f as $,r as M,i as T,h as se,o as ae,u as ie,p as ne,q as oe,n as ue}from"../chunks/scheduler.9Sbh5_-7.js";import{S as x,i as ee,e as w,c as S,a as K,m as v,t as V,b as C,d as P}from"../chunks/index.BH0f22tV.js";import{T as de}from"../chunks/top_bar.CupsfKjf.js";import{S as me,d as ce}from"../chunks/person-tooltip.XLeZCZLQ.js";import{s as Y,o as _e}from"../chunks/person.CuXAW-so.js";import{w as Z}from"../chunks/parse.cKCZ5i9N.js";import{D as ge,c as R,R as pe,a as re,C as he}from"../chunks/row-actions.dolUaLlg.js";import{S as be}from"../chunks/skill-badge.D1O7nmTq.js";import{T as ke,S as Ie}from"../chunks/skill-edit-dialog.BCbIys9I.js";import{P as Fe}from"../chunks/textarea.D0j6Mx-8.js";import{d as we,B as Ve}from"../chunks/index.BkpNfLCe.js";import{g as Ce,a as Se,d as J,c as Ke}from"../chunks/skill.Bz117NXl.js";function ve(t){let e,l,s,o,a,i;function m(d){t[8](d)}function r(d){t[9](d)}function c(d){t[10](d)}function b(d){t[11](d)}let g={data:t[4],columnInitializers:t[6],class:t[5]};return t[0]!==void 0&&(g.filterValue=t[0]),t[1]!==void 0&&(g.sortKeys=t[1]),t[2]!==void 0&&(g.hideForId=t[2]),t[3]!==void 0&&(g.flatColumns=t[3]),e=new ge({props:g}),I.push(()=>w(e,"filterValue",m)),I.push(()=>w(e,"sortKeys",r)),I.push(()=>w(e,"hideForId",c)),I.push(()=>w(e,"flatColumns",b)),{c(){S(e.$$.fragment)},l(d){K(e.$$.fragment,d)},m(d,_){v(e,d,_),i=!0},p(d,[_]){const h={};_&16&&(h.data=d[4]),_&32&&(h.class=d[5]),!l&&_&1&&(l=!0,h.filterValue=d[0],F(()=>l=!1)),!s&&_&2&&(s=!0,h.sortKeys=d[1],F(()=>s=!1)),!o&&_&4&&(o=!0,h.hideForId=d[2],F(()=>o=!1)),!a&&_&8&&(a=!0,h.flatColumns=d[3],F(()=>a=!1)),e.$set(h)},i(d){i||(V(e.$$.fragment,d),i=!0)},o(d){C(e.$$.fragment,d),i=!1},d(d){P(e,d)}}}function Pe(t,e,l){let{data:s=Y}=e,{actions:o=new Map}=e,{filterValue:a=Z("")}=e,{sortKeys:i=re([])}=e,{hideForId:m={}}=e,{flatColumns:r}=e,{class:c=""}=e,b=[{id:"icon",accessor:n=>n,header:"Icon",cell:n=>R(be,{skill:n.value}),plugins:{tableFilter:{disable:!0},sort:{disable:!0}}},{id:"name",accessor:"name",header:"Name",cell:n=>we(n.value)},{id:"description",accessor:"description",header:"Description"},{id:"tasks",accessor:n=>Ce(n),header:"Required for tasks",cell:n=>R(ke,{tasks:n.value}),plugins:{tableFilter:{getFilterValue:n=>n.map(k=>k.name).join(" ")},sort:{getSortValue:n=>n.map(k=>k.name).join(" ")}}},{id:"people",accessor:n=>Se(n),header:"People with this skill",cell:n=>R(Fe,{people:n.value,compact:!0}),plugins:{tableFilter:{getFilterValue:n=>n.map(k=>k.name).join(" ")},sort:{getSortValue:n=>n.map(k=>k.name).join(" ")}}}];o.size>0&&b.push({id:"actions",accessor:n=>n,header:"Actions",cell:n=>R(pe,{item:n.value,actions:o}),plugins:{tableFilter:{disable:!0},sort:{disable:!0}}});function g(n){a=n,l(0,a)}function d(n){i=n,l(1,i)}function _(n){m=n,l(2,m)}function h(n){r=n,l(3,r)}return t.$$set=n=>{"data"in n&&l(4,s=n.data),"actions"in n&&l(7,o=n.actions),"filterValue"in n&&l(0,a=n.filterValue),"sortKeys"in n&&l(1,i=n.sortKeys),"hideForId"in n&&l(2,m=n.hideForId),"flatColumns"in n&&l(3,r=n.flatColumns),"class"in n&&l(5,c=n.class)},[a,i,m,r,s,c,b,o,g,d,_,h]}class $e extends x{constructor(e){super(),ee(this,e,Pe,ve,L,{data:4,actions:7,filterValue:0,sortKeys:1,hideForId:2,flatColumns:3,class:5})}}const ye=t=>({}),te=t=>({}),De=t=>({}),le=t=>({});function je(t){let e,l;return e=new ce({}),{c(){S(e.$$.fragment)},l(s){K(e.$$.fragment,s)},m(s,o){v(e,s,o),l=!0},i(s){l||(V(e.$$.fragment,s),l=!0)},o(s){C(e.$$.fragment,s),l=!1},d(s){P(e,s)}}}function ze(t){let e,l,s;e=new Ve({props:{size:"icon_xl",variant:"ghost",class:"text-muted-foreground hover:text-accent-foreground",$$slots:{default:[je]},$$scope:{ctx:t}}}),e.$on("click",t[9]);const o=t[11].start,a=ae(o,t,t[20],te);return{c(){S(e.$$.fragment),l=q(),a&&a.c()},l(i){K(e.$$.fragment,i),l=A(i),a&&a.l(i)},m(i,m){v(e,i,m),T(i,l,m),a&&a.m(i,m),s=!0},p(i,m){const r={};m&1048576&&(r.$$scope={dirty:m,ctx:i}),e.$set(r),a&&a.p&&(!s||m&1048576)&&ie(a,o,i,i[20],s?oe(o,i[20],m,ye):ne(i[20]),te)},i(i){s||(V(e.$$.fragment,i),V(a,i),s=!0)},o(i){C(e.$$.fragment,i),C(a,i),s=!1},d(i){i&&$(l),P(e,i),a&&a.d(i)}}}function Ee(t){let e;const l=t[11].middle,s=ae(l,t,t[20],le);return{c(){s&&s.c()},l(o){s&&s.l(o)},m(o,a){s&&s.m(o,a),e=!0},p(o,a){s&&s.p&&(!e||a&1048576)&&ie(s,l,o,o[20],e?oe(l,o[20],a,De):ne(o[20]),le)},i(o){e||(V(s,o),e=!0)},o(o){C(s,o),e=!1},d(o){s&&s.d(o)}}}function Te(t){let e,l,s,o,a;function i(r){t[14](r)}let m={flatColumns:t[4]};return t[5]!==void 0&&(m.hideForId=t[5]),e=new he({props:m}),I.push(()=>w(e,"hideForId",i)),o=new me({props:{onInput:t[15]}}),{c(){S(e.$$.fragment),s=q(),S(o.$$.fragment)},l(r){K(e.$$.fragment,r),s=A(r),K(o.$$.fragment,r)},m(r,c){v(e,r,c),T(r,s,c),v(o,r,c),a=!0},p(r,c){const b={};c&16&&(b.flatColumns=r[4]),!l&&c&32&&(l=!0,b.hideForId=r[5],F(()=>l=!1)),e.$set(b);const g={};c&4&&(g.onInput=r[15]),o.$set(g)},i(r){a||(V(e.$$.fragment,r),V(o.$$.fragment,r),a=!0)},o(r){C(e.$$.fragment,r),C(o.$$.fragment,r),a=!1},d(r){r&&$(s),P(e,r),P(o,r)}}}function Ne(t){let e,l,s,o,a,i,m,r,c,b,g,d,_,h;function n(f){t[12](f)}function k(f){t[13](f)}let j={onSubmit:t[8]};t[7]!==void 0&&(j.skillProps=t[7]),t[6]!==void 0&&(j.open=t[6]),e=new Ie({props:j}),I.push(()=>w(e,"skillProps",n)),I.push(()=>w(e,"open",k)),i=new de({props:{sticky:!0,$$slots:{end:[Te],middle:[Ee],start:[ze]},$$scope:{ctx:t}}});function U(f){t[16](f)}function B(f){t[17](f)}function W(f){t[18](f)}function G(f){t[19](f)}let y={data:t[0],actions:t[10],class:"w-full"};return t[2]!==void 0&&(y.filterValue=t[2]),t[3]!==void 0&&(y.sortKeys=t[3]),t[5]!==void 0&&(y.hideForId=t[5]),t[4]!==void 0&&(y.flatColumns=t[4]),r=new $e({props:y}),I.push(()=>w(r,"filterValue",U)),I.push(()=>w(r,"sortKeys",B)),I.push(()=>w(r,"hideForId",W)),I.push(()=>w(r,"flatColumns",G)),{c(){S(e.$$.fragment),o=q(),a=O("div"),S(i.$$.fragment),m=q(),S(r.$$.fragment),this.h()},l(f){K(e.$$.fragment,f),o=A(f),a=Q(f,"DIV",{class:!0});var p=X(a);K(i.$$.fragment,p),m=A(p),K(r.$$.fragment,p),p.forEach($),this.h()},h(){M(a,"class",_="h-full w-full flex flex-col items-start justify-start overflow-y-scroll "+t[1])},m(f,p){v(e,f,p),T(f,o,p),T(f,a,p),v(i,a,null),se(a,m),v(r,a,null),h=!0},p(f,[p]){const z={};!l&&p&128&&(l=!0,z.skillProps=f[7],F(()=>l=!1)),!s&&p&64&&(s=!0,z.open=f[6],F(()=>s=!1)),e.$set(z);const N={};p&1048628&&(N.$$scope={dirty:p,ctx:f}),i.$set(N);const u={};p&1&&(u.data=f[0]),!c&&p&4&&(c=!0,u.filterValue=f[2],F(()=>c=!1)),!b&&p&8&&(b=!0,u.sortKeys=f[3],F(()=>b=!1)),!g&&p&32&&(g=!0,u.hideForId=f[5],F(()=>g=!1)),!d&&p&16&&(d=!0,u.flatColumns=f[4],F(()=>d=!1)),r.$set(u),(!h||p&2&&_!==(_="h-full w-full flex flex-col items-start justify-start overflow-y-scroll "+f[1]))&&M(a,"class",_)},i(f){h||(V(e.$$.fragment,f),V(i.$$.fragment,f),V(r.$$.fragment,f),h=!0)},o(f){C(e.$$.fragment,f),C(i.$$.fragment,f),C(r.$$.fragment,f),h=!1},d(f){f&&($(o),$(a)),P(e,f),P(i),P(r)}}}function Re(t,e,l){let{$$slots:s={},$$scope:o}=e,{data:a=Y}=e,i=Z(""),m=re([]),r,c={},{class:b=""}=e,g=!1,d,_=Z(J());function h(u){d=u.uuid,_.set(u),l(6,g=!0)}function n(u){_e(u)}function k(u){Y.update(D=>{if(d!==void 0){const E=D.findIndex(H=>H.uuid===d);if(E!==-1){console.log("Updating index: ",E);const H=D[E];return D[E]={...H,...u},console.log(D[E]),D}}let fe=Ke(u);return D.push(fe),D}),_.set(J()),d=void 0,l(6,g=!1)}function j(){_.set(J()),d=void 0,l(6,g=!0)}const U=new Map([["Edit",h],["Delete",n]]);function B(u){_=u,l(7,_)}function W(u){g=u,l(6,g)}function G(u){c=u,l(5,c)}const y=u=>i.set(u);function f(u){i=u,l(2,i)}function p(u){m=u,l(3,m)}function z(u){c=u,l(5,c)}function N(u){r=u,l(4,r)}return t.$$set=u=>{"data"in u&&l(0,a=u.data),"class"in u&&l(1,b=u.class),"$$scope"in u&&l(20,o=u.$$scope)},[a,b,i,m,r,c,g,_,k,j,U,s,B,W,G,y,f,p,z,N,o]}class qe extends x{constructor(e){super(),ee(this,e,Re,Ne,L,{data:0,class:1})}}function Ae(t){let e,l,s,o;return s=new qe({}),{c(){e=O("div"),l=O("main"),S(s.$$.fragment),this.h()},l(a){e=Q(a,"DIV",{class:!0});var i=X(e);l=Q(i,"MAIN",{class:!0});var m=X(l);K(s.$$.fragment,m),m.forEach($),i.forEach($),this.h()},h(){M(l,"class","w-full h-dvh p-4"),M(e,"class","bg-gray-50 w-full")},m(a,i){T(a,e,i),se(e,l),v(s,l,null),o=!0},p:ue,i(a){o||(V(s.$$.fragment,a),o=!0)},o(a){C(s.$$.fragment,a),o=!1},d(a){a&&$(e),P(s)}}}class Le extends x{constructor(e){super(),ee(this,e,null,Ae,L,{})}}export{Le as component};
