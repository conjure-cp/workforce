import{s as L,w as F,x as I,a as R,e as Q,g as N,c as W,b as X,f as T,r as M,i as A,h as ne,o as le,u as ie,p as oe,q as re,n as de}from"../chunks/scheduler.9Sbh5_-7.js";import{S as x,i as ee,e as C,c as v,a as K,m as S,t as w,b as V,d as P}from"../chunks/index.BH0f22tV.js";import{T as me}from"../chunks/top_bar.CupsfKjf.js";import{S as ce,d as _e}from"../chunks/person-tooltip.XLeZCZLQ.js";import{t as Y,k as te,p as ge}from"../chunks/person.CuXAW-so.js";import{w as Z}from"../chunks/parse.cKCZ5i9N.js";import{D as pe,c as z,R as he,a as fe,C as be}from"../chunks/row-actions.dolUaLlg.js";import{a as ke,P as Fe}from"../chunks/textarea.D0j6Mx-8.js";import{S as Ie}from"../chunks/skills-list.Cxjy7doc.js";import{d as Ce,B as we}from"../chunks/index.BkpNfLCe.js";import{C as Ve}from"../chunks/constraints-for-list.oy9WSA-W.js";import{g as ve,a as Ke,d as J,c as Se}from"../chunks/task.Lq0Dm78K.js";import{T as Pe}from"../chunks/task-edit-dialog.CYUCCgnl.js";function Te(t){let e,s,n,o,l,i;function m(d){t[8](d)}function r(d){t[9](d)}function c(d){t[10](d)}function b(d){t[11](d)}let g={data:t[4],columnInitializers:t[6],class:t[5]};return t[0]!==void 0&&(g.filterValue=t[0]),t[1]!==void 0&&(g.sortKeys=t[1]),t[2]!==void 0&&(g.hideForId=t[2]),t[3]!==void 0&&(g.flatColumns=t[3]),e=new pe({props:g}),F.push(()=>C(e,"filterValue",m)),F.push(()=>C(e,"sortKeys",r)),F.push(()=>C(e,"hideForId",c)),F.push(()=>C(e,"flatColumns",b)),{c(){v(e.$$.fragment)},l(d){K(e.$$.fragment,d)},m(d,_){S(e,d,_),i=!0},p(d,[_]){const h={};_&16&&(h.data=d[4]),_&32&&(h.class=d[5]),!s&&_&1&&(s=!0,h.filterValue=d[0],I(()=>s=!1)),!n&&_&2&&(n=!0,h.sortKeys=d[1],I(()=>n=!1)),!o&&_&4&&(o=!0,h.hideForId=d[2],I(()=>o=!1)),!l&&_&8&&(l=!0,h.flatColumns=d[3],I(()=>l=!1)),e.$set(h)},i(d){i||(w(e.$$.fragment,d),i=!0)},o(d){V(e.$$.fragment,d),i=!1},d(d){P(e,d)}}}function ye(t,e,s){let{data:n=Y}=e,{actions:o=new Map}=e,{filterValue:l=Z("")}=e,{sortKeys:i=fe([])}=e,{hideForId:m={}}=e,{flatColumns:r}=e,{class:c=""}=e,b=[{id:"icon",accessor:a=>a,header:"Icon",cell:a=>z(ke,{task:a.value}),plugins:{tableFilter:{disable:!0},sort:{disable:!0}}},{id:"name",accessor:"name",header:"Name",cell:a=>Ce(a.value)},{id:"description",accessor:"description",header:"Description"},{id:"people",accessor:a=>ve(a),header:"Assigned people",cell:a=>z(Fe,{people:a.value,compact:!0}),plugins:{tableFilter:{getFilterValue:a=>a.map(k=>k.name).join(" ")},sort:{getSortValue:a=>a.map(k=>k.name).join(" ")}}},{id:"required_skills",accessor:a=>Ke(a),header:"Required skills",cell:a=>z(Ie,{skills:a.value,compact:!0}),plugins:{tableFilter:{getFilterValue:a=>a.map(k=>k.name).join(" ")},sort:{getSortValue:a=>a.map(k=>k.name).join(" ")}}},{id:"constraints",accessor:a=>a,header:"Constraints",cell:a=>z(Ve,{forOperand:a.value}),plugins:{tableFilter:{getFilterValue:a=>te(a).map(k=>k.type).join(" ")},sort:{getSortValue:a=>te(a).map(k=>k.type).join(" ")}}}];o.size>0&&b.push({id:"actions",accessor:a=>a,header:"Actions",cell:a=>z(he,{item:a.value,actions:o}),plugins:{tableFilter:{disable:!0},sort:{disable:!0}}});function g(a){l=a,s(0,l)}function d(a){i=a,s(1,i)}function _(a){m=a,s(2,m)}function h(a){r=a,s(3,r)}return t.$$set=a=>{"data"in a&&s(4,n=a.data),"actions"in a&&s(7,o=a.actions),"filterValue"in a&&s(0,l=a.filterValue),"sortKeys"in a&&s(1,i=a.sortKeys),"hideForId"in a&&s(2,m=a.hideForId),"flatColumns"in a&&s(3,r=a.flatColumns),"class"in a&&s(5,c=a.class)},[l,i,m,r,n,c,b,o,g,d,_,h]}class $e extends x{constructor(e){super(),ee(this,e,ye,Te,L,{data:4,actions:7,filterValue:0,sortKeys:1,hideForId:2,flatColumns:3,class:5})}}const je=t=>({}),ae=t=>({}),De=t=>({}),se=t=>({});function qe(t){let e,s;return e=new _e({}),{c(){v(e.$$.fragment)},l(n){K(e.$$.fragment,n)},m(n,o){S(e,n,o),s=!0},i(n){s||(w(e.$$.fragment,n),s=!0)},o(n){V(e.$$.fragment,n),s=!1},d(n){P(e,n)}}}function ze(t){let e,s,n;e=new we({props:{size:"icon_xl",variant:"ghost",class:"text-muted-foreground hover:text-accent-foreground",$$slots:{default:[qe]},$$scope:{ctx:t}}}),e.$on("click",t[9]);const o=t[11].start,l=le(o,t,t[20],ae);return{c(){v(e.$$.fragment),s=R(),l&&l.c()},l(i){K(e.$$.fragment,i),s=N(i),l&&l.l(i)},m(i,m){S(e,i,m),A(i,s,m),l&&l.m(i,m),n=!0},p(i,m){const r={};m&1048576&&(r.$$scope={dirty:m,ctx:i}),e.$set(r),l&&l.p&&(!n||m&1048576)&&ie(l,o,i,i[20],n?re(o,i[20],m,je):oe(i[20]),ae)},i(i){n||(w(e.$$.fragment,i),w(l,i),n=!0)},o(i){V(e.$$.fragment,i),V(l,i),n=!1},d(i){i&&T(s),P(e,i),l&&l.d(i)}}}function Ae(t){let e;const s=t[11].middle,n=le(s,t,t[20],se);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,l){n&&n.m(o,l),e=!0},p(o,l){n&&n.p&&(!e||l&1048576)&&ie(n,s,o,o[20],e?re(s,o[20],l,De):oe(o[20]),se)},i(o){e||(w(n,o),e=!0)},o(o){V(n,o),e=!1},d(o){n&&n.d(o)}}}function Ee(t){let e,s,n,o,l;function i(r){t[14](r)}let m={flatColumns:t[4]};return t[5]!==void 0&&(m.hideForId=t[5]),e=new be({props:m}),F.push(()=>C(e,"hideForId",i)),o=new ce({props:{onInput:t[15]}}),{c(){v(e.$$.fragment),n=R(),v(o.$$.fragment)},l(r){K(e.$$.fragment,r),n=N(r),K(o.$$.fragment,r)},m(r,c){S(e,r,c),A(r,n,c),S(o,r,c),l=!0},p(r,c){const b={};c&16&&(b.flatColumns=r[4]),!s&&c&32&&(s=!0,b.hideForId=r[5],I(()=>s=!1)),e.$set(b);const g={};c&4&&(g.onInput=r[15]),o.$set(g)},i(r){l||(w(e.$$.fragment,r),w(o.$$.fragment,r),l=!0)},o(r){V(e.$$.fragment,r),V(o.$$.fragment,r),l=!1},d(r){r&&T(n),P(e,r),P(o,r)}}}function Re(t){let e,s,n,o,l,i,m,r,c,b,g,d,_,h;function a(f){t[12](f)}function k(f){t[13](f)}let j={onSubmit:t[8]};t[7]!==void 0&&(j.taskProps=t[7]),t[6]!==void 0&&(j.open=t[6]),e=new Pe({props:j}),F.push(()=>C(e,"taskProps",a)),F.push(()=>C(e,"open",k)),i=new me({props:{sticky:!0,$$slots:{end:[Ee],middle:[Ae],start:[ze]},$$scope:{ctx:t}}});function U(f){t[16](f)}function B(f){t[17](f)}function O(f){t[18](f)}function G(f){t[19](f)}let y={data:t[0],actions:t[10],class:"w-full"};return t[2]!==void 0&&(y.filterValue=t[2]),t[3]!==void 0&&(y.sortKeys=t[3]),t[4]!==void 0&&(y.flatColumns=t[4]),t[5]!==void 0&&(y.hideForId=t[5]),r=new $e({props:y}),F.push(()=>C(r,"filterValue",U)),F.push(()=>C(r,"sortKeys",B)),F.push(()=>C(r,"flatColumns",O)),F.push(()=>C(r,"hideForId",G)),{c(){v(e.$$.fragment),o=R(),l=Q("div"),v(i.$$.fragment),m=R(),v(r.$$.fragment),this.h()},l(f){K(e.$$.fragment,f),o=N(f),l=W(f,"DIV",{class:!0});var p=X(l);K(i.$$.fragment,p),m=N(p),K(r.$$.fragment,p),p.forEach(T),this.h()},h(){M(l,"class",_="h-full w-full flex flex-col items-start justify-start overflow-y-scroll "+t[1])},m(f,p){S(e,f,p),A(f,o,p),A(f,l,p),S(i,l,null),ne(l,m),S(r,l,null),h=!0},p(f,[p]){const D={};!s&&p&128&&(s=!0,D.taskProps=f[7],I(()=>s=!1)),!n&&p&64&&(n=!0,D.open=f[6],I(()=>n=!1)),e.$set(D);const E={};p&1048628&&(E.$$scope={dirty:p,ctx:f}),i.$set(E);const u={};p&1&&(u.data=f[0]),!c&&p&4&&(c=!0,u.filterValue=f[2],I(()=>c=!1)),!b&&p&8&&(b=!0,u.sortKeys=f[3],I(()=>b=!1)),!g&&p&16&&(g=!0,u.flatColumns=f[4],I(()=>g=!1)),!d&&p&32&&(d=!0,u.hideForId=f[5],I(()=>d=!1)),r.$set(u),(!h||p&2&&_!==(_="h-full w-full flex flex-col items-start justify-start overflow-y-scroll "+f[1]))&&M(l,"class",_)},i(f){h||(w(e.$$.fragment,f),w(i.$$.fragment,f),w(r.$$.fragment,f),h=!0)},o(f){V(e.$$.fragment,f),V(i.$$.fragment,f),V(r.$$.fragment,f),h=!1},d(f){f&&(T(o),T(l)),P(e,f),P(i),P(r)}}}function Ne(t,e,s){let{$$slots:n={},$$scope:o}=e,{data:l=Y}=e,i=Z(""),m=fe([]),r,c={},{class:b=""}=e,g=!1,d,_=Z(J());function h(u){d=u.uuid,_.set(u),s(6,g=!0)}function a(u){ge(u)}function k(u){Y.update($=>{if(d!==void 0){const q=$.findIndex(H=>H.uuid===d);if(q!==-1){console.log("Updating index: ",q);const H=$[q];return $[q]={...H,...u},console.log($[q]),$}}let ue=Se(u);return $.push(ue),$}),_.set(J()),d=void 0,s(6,g=!1)}function j(){_.set(J()),d=void 0,s(6,g=!0)}const U=new Map([["Edit",h],["Delete",a]]);function B(u){_=u,s(7,_)}function O(u){g=u,s(6,g)}function G(u){c=u,s(5,c)}const y=u=>i.set(u);function f(u){i=u,s(2,i)}function p(u){m=u,s(3,m)}function D(u){r=u,s(4,r)}function E(u){c=u,s(5,c)}return t.$$set=u=>{"data"in u&&s(0,l=u.data),"class"in u&&s(1,b=u.class),"$$scope"in u&&s(20,o=u.$$scope)},[l,b,i,m,r,c,g,_,k,j,U,n,B,O,G,y,f,p,D,E,o]}class Me extends x{constructor(e){super(),ee(this,e,Ne,Re,L,{data:0,class:1})}}function Ue(t){let e,s,n,o;return n=new Me({}),{c(){e=Q("div"),s=Q("main"),v(n.$$.fragment),this.h()},l(l){e=W(l,"DIV",{class:!0});var i=X(e);s=W(i,"MAIN",{class:!0});var m=X(s);K(n.$$.fragment,m),m.forEach(T),i.forEach(T),this.h()},h(){M(s,"class","w-full h-dvh p-4"),M(e,"class","bg-gray-50 w-full")},m(l,i){A(l,e,i),ne(e,s),S(n,s,null),o=!0},p:de,i(l){o||(w(n.$$.fragment,l),o=!0)},o(l){V(n.$$.fragment,l),o=!1},d(l){l&&T(e),P(n)}}}class tt extends x{constructor(e){super(),ee(this,e,null,Ue,L,{})}}export{tt as component};
